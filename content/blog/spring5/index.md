---
title: "Spring Chap. 5"
date: "2019-12-26T16:00:39.375Z"
description: "Toby Spring"
---

# 서비스 추상화 

## 조건
1. 유저에 등급을 추가하고, 등급 업 조건을 설정
    - 등급은 금, 은, 동
    - 등금 동->은 로그인 50회
    - 등급 은->금 추천 30회
2. 고려해야할 점
    - 중복된 부분 유무
    - 코드를 이해하기 쉬운지
    - 코드의 위치가 적합한지
    - 앞으로 변경이 일어난다면 어떤것이 있을 수 있고, 그 변화에 쉽게 대응할 수 있는지
3. 문제점
    - if/else if/else 블록: 레벨의 변화단계, 업그레이드 조건, 조건이 충족되었을 때 작업이 섞여있어서 이해하기 쉽지않음
    - 레벨이 늘어난다면?: if 블록 갯수 증가, level enum 수정,
    - 레벨 업 작업이 복잡해진다면?: 등급 업하는 service 메소드가 길어지고 복잡해짐(이해하기 힘들어짐)
    - if 조건문이 현재 레벨과 레벨 업 조건을 동시에 비교하는 부분?: 레벨이 동이면서 로그인이 49인 유저와 새로운 레벨의 유저가 else블록에서 함께 처리됨
    > 즉 상당히 변화에 취약하고 다루기 힘든 코드, 문제점이 무엇인지 파악하는것조차 힘듦
4. 리팩토링
    - 추상적인 흐름에서부터 로직 작성: 자주 변경될 가능성이 있는 구체적인 내용이 추상적인 로직의 흐름과 함께 썩여있음.
    ```
    function upgrade() {
        list users;
        foreach users 
            canlevelup? upgrade : nothing
    }
    ```
    
    
